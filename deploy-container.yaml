apiVersion: '2021-10-01'
location: westus3
name: sshd-container-group
properties:
  osType: Linux
  restartPolicy: Always
  containers:
  - name: sshd-container
    properties:
      image: ghcr.io/matthewpetro/sshd-docker:latest
      ports:
      - protocol: TCP
        port: 8080
      resources:
        requests:
          cpu: 1.0
          memoryInGB: 1.5
      volumeMounts:
      - mountPath: /mnt/keys
        name: keys
  ipAddress:
    ports:
    - protocol: TCP
      port: 8080
    type: Public
    dnsNameLabel: sshd-container
    autoGeneratedDomainNameLabelScope: tenantReuse
  volumes:
  - name: keys
    secret:
      ssh_host_ecdsa_key: ${SSH_HOST_ECDSA_KEY}
      ssh_host_ecdsa_key.pub: ${SSH_HOST_ECDSA_KEY_PUB}
      ssh_host_ed25519_key: ${SSH_HOST_ED25519_KEY}
      ssh_host_ed25519_key.pub: ${SSH_HOST_ED25519_KEY_PUB}
      ssh_host_rsa_key: ${SSH_HOST_RSA_KEY}
      ssh_host_rsa_key.pub: ${SSH_HOST_RSA_KEY_PUB}
type: Microsoft.ContainerInstance/containerGroups